!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){var r=n(14),o=n(15),i=n(16),u=n(17);t.exports=function(t){return r(t)||o(t)||i(t)||u()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(3);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(5),o=n(3),i=n(11),u=n(12);function c(e){var n="function"==typeof Map?new Map:void 0;return t.exports=c=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return u(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},c(e)}t.exports=c},function(t,e,n){var r=n(4),o=n(10);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(3),o=n(13);function i(e,n,u){return o()?t.exports=i=Reflect.construct:t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}t.exports=i},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var r=n(6);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r=n(4),o=n.n(r),i=n(7),u=n.n(i),c=(n(9),n(5),n(8)),a=n.n(c),l=n(0),f=n.n(l),s=n(1),p=n.n(s),v=n(2),d=n.n(v),g=function(){function t(){p()(this,t)}return d()(t,null,[{key:"normalize",value:function(e){return t.length(e)?t.scale(e,1/t.length(e)):e}},{key:"rotate",value:function(t,e){var n=Math.cos(e),r=Math.sin(e);return[t[0]*n-t[1]*r,t[1]*n+t[0]*r]}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"cross",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"projection",value:function(e,n){var r=t.dot(e,n)/t.dot(n,n);return[n[0]*r,n[1]*r]}},{key:"length",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"scale",value:function(t,e){return[t[0]*e,t[1]*e]}},{key:"collisionCalc",value:function(e,n,r,o){return t.scale(t.add(t.scale(e,r-o),t.scale(n,2*o)),1/(r+o))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}}]),t}(),y=function(){function t(){p()(this,t)}return d()(t,null,[{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"normalize",value:function(e){var n=g.length(e);return n&&t.scale(e,1/n),e}},{key:"add",value:function(t,e){return t[0]+=e[0],t[1]+=e[1],t}},{key:"sub",value:function(t,e){return t[0]-=e[0],t[1]-=e[1],t}},{key:"scale",value:function(t,e){return t[0]*=e,t[1]*=e,t}}]),t}(),h=function(){function t(){p()(this,t)}return d()(t,null,[{key:"toPosRate",value:function(t,e,n){return[t[0]*(1-n)+e[0]*n,t[1]*(1-n)+e[1]*n]}},{key:"cross",value:function(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}},{key:"getCenter",value:function(t,e){return[.5*(t[0]+e[0]),.5*(t[1]+e[1])]}},{key:"getVector",value:function(t,e){return[e[0]-t[0],e[1]-t[1]]}},{key:"addVector",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"distance",value:function(e,n){return g.length(t.getVector(e,n))}},{key:"getLine",value:function(e,n){return{point:e,vector:t.getVector(e,n)}}}]),t}(),m=function(){function t(){p()(this,t)}return d()(t,null,[{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"addVector",value:function(t,e){return t[0]+=e[0],t[1]+=e[1],t}}]),t}(),b=function(){function t(){p()(this,t)}return d()(t,null,[{key:"intersection",value:function(t,e){var n=g.cross(t.vector,e.vector);if(0===n)return null;var r=h.getVector(t.point,e.point);return{t0:g.cross(r,e.vector)/n,t1:g.cross(r,t.vector)/n}}},{key:"checkIntersectionData",value:function(t){return t&&t.t0>=0&&t.t0<=1&&t.t1>=0&&t.t1<=1}},{key:"pointCast",value:function(e,n,r){var o=t.intersection({point:e,vector:n},r);if(o&&o.t0>=0)return h.addVector(e,g.scale(n,o.t0))}},{key:"lineCast",value:function(e,n,r){var o=[],i=t.intersection(n,r);if(i&&i.t0>=0&&i.t0<=1&&i.t1>=0&&i.t1<=1){var u=h.addVector(n.point,g.scale(n.vector,i.t0));o.push(u,u)}if(o.length<4){var c=r.point,a=t.intersection({point:e,vector:h.getVector(e,c)},n);if(a&&a.t0>=0&&a.t0<=1&&a.t1>=0&&a.t1<=1){var l=h.addVector(n.point,g.scale(n.vector,a.t1));o.push(l,c)}}if(o.length<4){var f=h.addVector(r.point,r.vector),s=t.intersection({point:e,vector:h.getVector(e,f)},n);if(s&&s.t0>=0&&s.t0<=1&&s.t1>=0&&s.t1<=1){var p=h.addVector(n.point,g.scale(n.vector,s.t1));o.push(p,f)}}var v=g.length(r.vector);if(o.length<4){var d=n.point,y=t.intersection({point:d,vector:h.getVector(e,d)},r);if(y&&y.t0>=0&&y.t1*v>-1e-6&&y.t1*v<v+1e-6){var m=h.addVector(r.point,g.scale(r.vector,y.t1));o.push(d,m)}}if(o.length<4){var b=h.addVector(n.point,n.vector),x=t.intersection({point:b,vector:h.getVector(e,b)},r);if(x&&x.t0>=0&&x.t1*v>-1e-6&&x.t1*v<v+1e-6){var k=h.addVector(r.point,g.scale(r.vector,x.t1));o.push(b,k)}}if(o.length>=4){var w=[o[2],o[1]];o[1]=w[0],o[2]=w[1];var V=function(t,e,n,r){var o=h.getVector(e[n],e[r]),i=h.getVector(e[n],t);if(g.cross(o,i)>0){var u=[e[r],e[n]];e[n]=u[0],e[r]=u[1]}};return V(e,o,0,1),V(e,o,3,2),o}}},{key:"getEquation",value:function(t){return{a:t.vector[1],b:-t.vector[0],c:g.cross(t.vector,t.point)}}}]),t}(),x=function(){function t(){p()(this,t)}return d()(t,null,[{key:"getPoints",value:function(e){var n=t.getLeft(e),r=t.getRight(e),o=t.getTop(e),i=t.getBottom(e);return[[n,o],[r,o],[r,i],[n,i]]}},{key:"getLines",value:function(e){return t.getPoints(e).map((function(t,e,n){return{point:t,vector:h.getVector(t,n[(e+1)%n.length])}}))}},{key:"getLeft",value:function(t){return t.point[0]}},{key:"getRight",value:function(t){return t.point[0]+t.size[0]}},{key:"getTop",value:function(t){return t.point[1]}},{key:"getBottom",value:function(t){return t.point[1]+t.size[1]}}]),t}(),k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?e:t>n?n:t},w=function(t,e,n,r){n&&(t.beginPath(),e.forEach((function(e,n){t[0===n?"moveTo":"lineTo"].apply(t,f()(e))})),t.closePath(),t[r+"Style"]=n,t[r]())},V=function(t,e,n,r,o){r&&(t.beginPath(),t.arc.apply(t,f()(e).concat([n,0,2*Math.PI])),t.closePath(),t[o+"Style"]=r,t[o]())},S=arguments,M=void 0,j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=null;return function(){var r=M,o=S;clearTimeout(n),n=setTimeout((function(){t.apply(r,o)}),e)}},O=function(){function t(){p()(this,t)}return d()(t,null,[{key:"identity",value:function(){return[1,0,0,0,1,0,0,0,1]}},{key:"translation",value:function(t,e){return[1,0,0,0,1,0,t,e,1]}},{key:"rotation",value:function(t){var e=Math.cos(t),n=Math.sin(t);return[e,-n,0,n,e,0,0,0,1]}},{key:"scaling",value:function(t,e){return[t,0,0,0,e,0,0,0,1]}},{key:"multiply",value:function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],u=t[4],c=t[5],a=t[6],l=t[7],f=t[8],s=e[0],p=e[1],v=e[2],d=e[3],g=e[4],y=e[5],h=e[6],m=e[7],b=e[8];return[s*n+p*i+v*a,s*r+p*u+v*l,s*o+p*c+v*f,d*n+g*i+y*a,d*r+g*u+y*l,d*o+g*c+y*f,h*n+m*i+b*a,h*r+m*u+b*l,h*o+m*c+b*f]}},{key:"transform",value:function(t,e){var n=t[0],r=t[1],o=t[3],i=t[4],u=t[6],c=t[7];return[e[0]*n+e[1]*o+u,e[0]*r+e[1]*i+c]}},{key:"projection",value:function(t,e){return[2/t,0,0,0,-2/e,0,-1,1,1]}}]),t}();function E(t,e){E=function(t,e){return new c(t,void 0,e)};var n=a()(RegExp),r=RegExp.prototype,i=new WeakMap;function c(t,e,r){var o=n.call(this,t,e);return i.set(o,r||i.get(t)),o}function l(t,e){var n=i.get(e);return Object.keys(n).reduce((function(e,r){return e[r]=t[n[r]],e}),Object.create(null))}return u()(c,n),c.prototype.exec=function(t){var e=r.exec.call(this,t);return e&&(e.groups=l(e,this)),e},c.prototype[Symbol.replace]=function(t,e){if("string"==typeof e){var n=i.get(this);return r[Symbol.replace].call(this,t,e.replace(/\$<([^>]+)>/g,(function(t,e){return"$"+n[e]})))}if("function"==typeof e){var u=this;return r[Symbol.replace].call(this,t,(function(){var t=[];return t.push.apply(t,arguments),"object"!==o()(t[t.length-1])&&t.push(l(t,u)),e.apply(this,t)}))}return r[Symbol.replace].call(this,t,e)},E.apply(this,arguments)}var P,A,F=function(t,e,n){var r=1/0,o=-1,i=null;return n.forEach((function(n,u){var c=b.intersection({point:t,vector:e},n);if(c&&c.t0>0&&c.t1>=0&&c.t1<=1){var a=c.t0*g.length(e);a<r&&(r=a,o=u,i=c)}})),{index:o,intersectionData:i}},R=function(t){for(var e=[],n=0;n<t.length-1;n++)for(var r=n+1;r<t.length;r++){var o=b.intersection(t[n],t[r]);o&&o.t0>0&&o.t0<1&&o.t1>0&&o.t1<1&&e.push(h.addVector(t[n].point,g.scale(t[n].vector,o.t0)))}return e},C=function(){var t=x.getLeft(N),e=x.getRight(N),n=x.getTop(N),r=x.getBottom(N),o=x.getLines(N),i=$.map((function(t){return t.points.length>2?t.points.map((function(t,e,n){return{point:t.slice(),vector:h.getVector(t,n[(e+1)%n.length])}})):t.points.length>1?[{point:t.points[0].slice(),vector:h.getVector(t.points[0],t.points[1])}]:void 0})).map((function(i){return i.map((function(i){var u=!1;if(o.forEach((function(t){var e=b.intersection(t,i);if(b.checkIntersectionData(e)){u=!0;var n=h.getVector(t.point,i.point);g.cross(t.vector,n)>0?y.scale(i.vector,e.t1):(m.addVector(i.point,g.scale(i.vector,e.t1)),y.scale(i.vector,1-e.t1))}})),!u)if(i.point[0]>=t&&i.point[0]<=e&&i.point[1]>=n&&i.point[1]<=r)u=!0;else{var c=h.addVector(i.point,i.vector);c[0]>=t&&c[0]<=e&&c[1]>=n&&c[1]<=r&&(u=!0)}if(u)return i})).filter((function(t){return void 0!==t}))})),u=[].concat(f()(o),f()(i.flat())),c=R(u),a=[].concat(f()(x.getPoints(N)),f()(i.flatMap((function(t){return 1===t.length?[t[0].point,h.addVector(t[0].point,t[0].vector)]:t.map((function(t){return t.point}))}))),f()(c)).filter((function(t){var e=h.getVector(z,t),n=g.length(e);return!u.some((function(t){var r=g.length(t.vector),o=b.intersection({point:z,vector:e},t);return o&&o.t0>0&&o.t0*n<n-1e-6&&o.t1*r>=-1e-6&&o.t1*r<=r+1e-6}))})),l=a.map((function(t,e){return{angle:g.getAngle(h.getVector(z,t)),index:e}}));l.sort((function(t,e){return t.angle-e.angle})),q=l.flatMap((function(t,e,n){var r=a[t.index],o=a[n[(e+1)%n.length].index],i=h.toPosRate(r,o,.5),c=h.getVector(z,i),l=F(z,c,u);if(-1!=l.index&&l.intersectionData.t0-1>0){var f=u[l.index],s=b.pointCast(z,h.getVector(z,r),f);if(!s)return[];var p=b.pointCast(z,h.getVector(z,o),f);return p?[s,p]:[]}return[r,o]}));var s=-1;z[0]<=t?s=q.findIndex((function(e){return e[0]<=t})):z[0]>=e?s=q.findIndex((function(t){return t[0]>=e})):z[1]<=n?s=q.findIndex((function(t){return t[1]<=n})):z[1]>=r&&(s=q.findIndex((function(t){return t[1]>=r}))),-1!==s&&(s+=s%2?1:0,q=[].concat(f()(q.slice(s,q.length)),f()(q.slice(0,s)),[z,z]))},T=function(){B.lineJoin="round",B.lineCap="round",B.save();var t=B.createRadialGradient.apply(B,z.concat([0],z,[g.length([P,A])]));t.addColorStop(0,"rgba(0,0,0,1)"),t.addColorStop(.3,"rgba(0,0,0,0.5)"),t.addColorStop(1,"rgba(0,0,0,0)"),W.forEach((function(e){w(B,e,t,"fill")})),B.restore(),B.save();var e=B.createRadialGradient.apply(B,z.concat([0],z,[g.length([P,A])]));e.addColorStop(0,"hsl(40,100%,70%)"),e.addColorStop(.1,"hsl(50,100%,55%)"),e.addColorStop(.3,"hsl(60,100%,50%)"),e.addColorStop(1,"hsl(60,0%,0%)"),w(B,q,e,"fill"),B.restore(),V(B,z,2,"#0000ff","fill"),B.save(),B.lineWidth=2,$.forEach((function(t){w(B,t.points,t.color,t.type)})),B.restore()},_=function t(){requestAnimationFrame(t);var e=Date.now(),n=(e-L)/1e3;L=e,I=1/n,B.clearRect(0,0,P,A),B.fillStyle="#111111",B.fillRect(0,0,P,A),C(),T(),B.save(),B.font="bold 18px Noto Sans TC",B.textAlign="start",B.textBaseline="hanging",B.fillStyle="#ff0000",B.fillText(I.toFixed(1),10,10),B.restore()},I=0,L=Date.now(),D=document.getElementById("canvas"),B=D.getContext("2d");P=window.innerWidth,A=window.innerHeight;var z=[.5*P,.5*A],q=[],W=[],N={point:[0,0],size:[600,600]},$=[],G=function(t){for(var e=[0,0],n=t;n;){var r,o;e[0]+=null!==(r=n.scrollLeft)&&void 0!==r?r:0,e[1]+=null!==(o=n.scrollTop)&&void 0!==o?o:0,n=n.parentElement}var i=t.getBoundingClientRect();return[i.x+e[0],i.y+e[1]]},H=function(t){for(var e=t,n=O.identity();e;){if("svg"==e.tagName)return n;var r=e.transform.baseVal.consolidate();if(r&&r.matrix){var o=[r.matrix.a,r.matrix.b,0,r.matrix.c,r.matrix.d,0,r.matrix.e,r.matrix.f,1];n=O.multiply(o,n)}e=e.parentElement}},J=function(){var t;$=[];for(var e=0;e<100;e++){var n=2*Math.PI*Math.random(),r=20+20*Math.random(),o=[.5*r+(P-r)*Math.random(),.5*r+(A-r)*Math.random()],i=[Math.cos(n),Math.sin(n)];$.push({points:[h.addVector(o,g.scale(i,.5*-r)),h.addVector(o,g.scale(i,.5*r))],color:"#333399",type:"stroke"})}var u=document.getElementById("svg"),c=u.querySelectorAll("#g > path"),a=document.createElementNS("http://www.w3.org/2000/svg","path"),l=f()(c).flatMap((function(t,e){var n=G(u),r=H(t);return r&&y.add(n,O.transform(r,[0,0])),t.getAttribute("d").split(/\m|\M/g).filter((function(t){return t})).map((function(t){var e=t.match(E(/^[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(\x2D?[0-9]+(.[0-9]*)?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(\x2D?[0-9]+(.[0-9]*)?)/,{x:1,y:3}));return{s:"m"+t,point:[parseFloat(e.groups.x),parseFloat(e.groups.y)]}})).map((function(t,e,r){a.setAttribute("d",t.s);var o=a.getTotalLength(),i=0===e?[0,0]:r[e-1].point;return m.addVector(i,n),{points:new Array(Math.ceil(o/5)).fill(void 0).map((function(t,e,n){var r=U(a.getPointAtLength(e/n.length*o));return h.addVector(r,i)})),color:"#993333",type:"stroke"}})).filter((function(t){return t}))}));(t=$).push.apply(t,f()(l))},U=function(t){return[t.x,t.y]};J();var X=function(t){y.set(z,t.pageX,t.pageY),z[0]=k(z[0],x.getLeft(N),x.getRight(N)),z[1]=k(z[1],x.getTop(N),x.getBottom(N))},Y=function(t){P=D.width=window.innerWidth,A=D.height=window.innerHeight,y.set(N.size,P,A),z[0]=k(z[0],x.getLeft(N),x.getRight(N)),z[1]=k(z[1],x.getTop(N),x.getBottom(N))};window.addEventListener("mousemove",X),window.addEventListener("resize",j(Y)),Y(),_()}]);