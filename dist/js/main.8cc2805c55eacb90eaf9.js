!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){var r=n(4),o=n(5),i=n(6),a=n(7);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){var r=n(3);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(3);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r,o,i=n(0),a=n.n(i),c=n(1),u=n.n(c),f=n(2),l=n.n(f),s=function(){function t(){u()(this,t)}return l()(t,null,[{key:"normalize",value:function(e){return t.length(e)?t.scale(e,1/t.length(e)):e}},{key:"rotate",value:function(t,e){var n=Math.cos(e),r=Math.sin(e);return[t[0]*n-t[1]*r,t[1]*n+t[0]*r]}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"cross",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"projection",value:function(e,n){var r=t.dot(e,n)/t.dot(n,n);return[n[0]*r,n[1]*r]}},{key:"length",value:function(e){return Math.sqrt(t.dot(e,e))}},{key:"scale",value:function(t,e){return[t[0]*e,t[1]*e]}},{key:"collisionCalc",value:function(e,n,r,o){return t.scale(t.add(t.scale(e,r-o),t.scale(n,2*o)),1/(r+o))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}}]),t}(),v=function(){function t(){u()(this,t)}return l()(t,null,[{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"normalize",value:function(e){var n=s.length(e);return n&&t.scale(e,1/n),e}},{key:"add",value:function(t,e){return t[0]+=e[0],t[1]+=e[1],t}},{key:"sub",value:function(t,e){return t[0]-=e[0],t[1]-=e[1],t}},{key:"scale",value:function(t,e){return t[0]*=e,t[1]*=e,t}}]),t}(),p=function(){function t(){u()(this,t)}return l()(t,null,[{key:"toPosRate",value:function(t,e,n){return[t[0]*(1-n)+e[0]*n,t[1]*(1-n)+e[1]*n]}},{key:"cross",value:function(t,e,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}},{key:"getCenter",value:function(t,e){return[.5*(t[0]+e[0]),.5*(t[1]+e[1])]}},{key:"getVector",value:function(t,e){return[e[0]-t[0],e[1]-t[1]]}},{key:"addVector",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"distance",value:function(e,n){return s.length(t.getVector(e,n))}},{key:"getLine",value:function(e,n){return{point:e,vector:t.getVector(e,n)}}}]),t}(),d=function(){function t(){u()(this,t)}return l()(t,null,[{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"addVector",value:function(t,e){return t[0]+=e[0],t[1]+=e[1],t}}]),t}(),g=function(){function t(){u()(this,t)}return l()(t,null,[{key:"intersection",value:function(t,e){var n=s.cross(t.vector,e.vector);if(0===n)return null;var r=p.getVector(t.point,e.point);return{t0:s.cross(r,e.vector)/n,t1:s.cross(r,t.vector)/n}}},{key:"checkIntersectionData",value:function(t){return t&&t.t0>=0&&t.t0<=1&&t.t1>=0&&t.t1<=1}},{key:"pointCast",value:function(e,n,r){var o=t.intersection({point:e,vector:n},r);if(o&&o.t0>=0)return p.addVector(e,s.scale(n,o.t0))}},{key:"lineCast",value:function(e,n,r){var o=[],i=t.intersection(n,r);if(i&&i.t0>=0&&i.t0<=1&&i.t1>=0&&i.t1<=1){var a=p.addVector(n.point,s.scale(n.vector,i.t0));o.push(a,a)}if(o.length<4){var c=r.point,u=t.intersection({point:e,vector:p.getVector(e,c)},n);if(u&&u.t0>=0&&u.t0<=1&&u.t1>=0&&u.t1<=1){var f=p.addVector(n.point,s.scale(n.vector,u.t1));o.push(f,c)}}if(o.length<4){var l=p.addVector(r.point,r.vector),v=t.intersection({point:e,vector:p.getVector(e,l)},n);if(v&&v.t0>=0&&v.t0<=1&&v.t1>=0&&v.t1<=1){var d=p.addVector(n.point,s.scale(n.vector,v.t1));o.push(d,l)}}var g=s.length(r.vector);if(o.length<4){var h=n.point,y=t.intersection({point:h,vector:p.getVector(e,h)},r);if(y&&y.t0>=0&&y.t1*g>-1e-6&&y.t1*g<g+1e-6){var m=p.addVector(r.point,s.scale(r.vector,y.t1));o.push(h,m)}}if(o.length<4){var k=p.addVector(n.point,n.vector),b=t.intersection({point:k,vector:p.getVector(e,k)},r);if(b&&b.t0>=0&&b.t1*g>-1e-6&&b.t1*g<g+1e-6){var V=p.addVector(r.point,s.scale(r.vector,b.t1));o.push(k,V)}}if(o.length>=4){var w=[o[2],o[1]];o[1]=w[0],o[2]=w[1];var x=function(t,e,n,r){var o=p.getVector(e[n],e[r]),i=p.getVector(e[n],t);if(s.cross(o,i)>0){var a=[e[r],e[n]];e[n]=a[0],e[r]=a[1]}};return x(e,o,0,1),x(e,o,3,2),o}}},{key:"getEquation",value:function(t){return{a:t.vector[1],b:-t.vector[0],c:s.cross(t.vector,t.point)}}}]),t}(),h=function(){function t(){u()(this,t)}return l()(t,null,[{key:"getPoints",value:function(e){var n=t.getLeft(e),r=t.getRight(e),o=t.getTop(e),i=t.getBottom(e);return[[n,o],[r,o],[r,i],[n,i]]}},{key:"getLines",value:function(e){return t.getPoints(e).map((function(t,e,n){return{point:t,vector:p.getVector(t,n[(e+1)%n.length])}}))}},{key:"getLeft",value:function(t){return t.point[0]}},{key:"getRight",value:function(t){return t.point[0]+t.size[0]}},{key:"getTop",value:function(t){return t.point[1]}},{key:"getBottom",value:function(t){return t.point[1]+t.size[1]}}]),t}(),y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?e:t>n?n:t},m=function(t,e,n,r,o){t.shadowColor=o,t.shadowBlur=r,t.shadowOffsetX=e,t.shadowOffsetY=n},k=function(t,e,n,r){n&&(t.beginPath(),e.forEach((function(e,n){t[0===n?"moveTo":"lineTo"].apply(t,a()(e))})),t.closePath(),t[r+"Style"]=n,t[r]())},b=function(t,e,n,r,o){r&&(t.beginPath(),t.arc.apply(t,a()(e).concat([n,0,2*Math.PI])),t.closePath(),t[o+"Style"]=r,t[o]())},V=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;r&&(t.beginPath(),t.lineWidth=o,t.moveTo.apply(t,a()(e)),t.lineTo.apply(t,a()(n)),t.closePath(),t.strokeStyle=r,t.stroke())},w=arguments,x=void 0,M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=null;return function(){var r=x,o=w;clearTimeout(n),n=setTimeout((function(){t.apply(r,o)}),e)}},P=function(t,e,n){var r=1/0,o=-1,i=null;return n.forEach((function(n,a){var c=g.intersection({point:t,vector:e},n);if(c&&c.t0>0&&c.t1>=0&&c.t1<=1){var u=c.t0*s.length(e);u<r&&(r=u,o=a,i=c)}})),{index:o,intersectionData:i}},S=function(t){for(var e=[],n=0;n<t.length-1;n++)for(var r=n+1;r<t.length;r++){var o=g.intersection(t[n],t[r]);o&&o.t0>0&&o.t0<1&&o.t1>0&&o.t1<1&&e.push(p.addVector(t[n].point,s.scale(t[n].vector,o.t0)))}return e},C=function(t,e){var n=h.getLeft(t),r=h.getRight(t),o=h.getTop(t),i=h.getBottom(t),c=h.getLines(t),u=e.map((function(t){return t.points.length>2?t.points.map((function(t,e,n){return{point:t.slice(),vector:p.getVector(t,n[(e+1)%n.length])}})):t.points.length>1?[{point:t.points[0].slice(),vector:p.getVector(t.points[0],t.points[1])}]:void 0})).map((function(t){return t.map((function(t){var e=!1;if(c.forEach((function(n){var r=g.intersection(n,t);if(g.checkIntersectionData(r)){e=!0;var o=p.getVector(n.point,t.point);s.cross(n.vector,o)>0?v.scale(t.vector,r.t1):(d.addVector(t.point,s.scale(t.vector,r.t1)),v.scale(t.vector,1-r.t1))}})),!e)if(t.point[0]>=n&&t.point[0]<=r&&t.point[1]>=o&&t.point[1]<=i)e=!0;else{var a=p.addVector(t.point,t.vector);a[0]>=n&&a[0]<=r&&a[1]>=o&&a[1]<=i&&(e=!0)}if(e)return t})).filter((function(t){return void 0!==t}))})),f=[].concat(a()(c),a()(u.flat())),l=S(f),y=[].concat(a()(h.getPoints(t)),a()(u.flatMap((function(t){return 1===t.length?[t[0].point,p.addVector(t[0].point,t[0].vector)]:t.map((function(t){return t.point}))}))),a()(l));return{lines:f,points:y}},T=function(){var t=C(z,B),e=t.lines,n=t.points,r=n.filter((function(t){var n=p.getVector(L,t),r=s.length(n);return!e.some((function(t){var e=s.length(t.vector),o=g.intersection({point:L,vector:n},t);if(o&&o.t0>0&&o.t0*r<r-1e-6&&o.t1*e>=-1e-6&&o.t1*e<=e+1e-6)return!0}))})),o=r.map((function(t,e){return{angle:s.getAngle(p.getVector(L,t)),index:e}}));o.sort((function(t,e){return t.angle-e.angle})),R=o.flatMap((function(t,n,o){var i=r[t.index],a=r[o[(n+1)%o.length].index],c=p.toPosRate(i,a,.5),u=p.getVector(L,c),f=P(L,u,e);if(-1!=f.index&&f.intersectionData.t0-1>0){var l=e[f.index],s=g.pointCast(L,p.getVector(L,i),l);if(!s)return[];var v=g.pointCast(L,p.getVector(L,a),l);return v?[s,v]:[]}return[i,a]}));var i=h.getLeft(z),c=h.getRight(z),u=h.getTop(z),f=h.getBottom(z),l=-1;L[0]<=i?l=R.findIndex((function(t){return t[0]<=i})):L[0]>=c?l=R.findIndex((function(t){return t[0]>=c})):L[1]<=u?l=R.findIndex((function(t){return t[1]<=u})):L[1]>=f&&(l=R.findIndex((function(t){return t[1]>=f}))),-1!==l&&(l+=l%2?1:0,R=[].concat(a()(R.slice(l,R.length)),a()(R.slice(0,l)),[L,L])),A=e.flatMap((function(t,n){if(n>=4)return e.map((function(e,n){if(n<4){var r=g.lineCast(L,t,e);if(r)return r}}))})).filter((function(t){return void 0!==t}))},O=function(){I.lineJoin="round",I.lineCap="round",I.save(),A.forEach((function(t){var e=p.getVector(t[0],t[1]),n=[-e[1],e[0]];e[0]=n[0],e[1]=n[1],v.scale(v.normalize(e),200);var r=I.createLinearGradient.apply(I,a()(t[0]).concat(a()(p.addVector(t[0],e))));r.addColorStop(0,"rgba(0,0,0,1)"),r.addColorStop(.3,"rgba(0,0,0,0.5)"),r.addColorStop(1,"rgba(0,0,0,0)"),k(I,t,r,"fill")})),I.restore(),I.save();var t=I.createRadialGradient.apply(I,L.concat([0],L,[s.length([r,o])]));t.addColorStop(0,"#ffff00"),t.addColorStop(1,"#000000"),k(I,R,t,"fill"),I.restore(),b(I,L,2,"#0000ff","fill"),I.save(),I.lineWidth=2,B.forEach((function(t){k(I,t.points,t.color,t.type)})),I.restore(),I.save(),I.globalCompositeOperation="lighter",m(I,0,0,3,"#ffffff"),R.forEach((function(t,e,n){e%2==0&&V(I,t,n[e+1],"#ffffff",1)})),I.restore()},j=function t(){requestAnimationFrame(t),I.clearRect(0,0,r,o),I.fillStyle="#111111",I.fillRect(0,0,r,o),T(),O()},E=document.getElementById("canvas"),I=E.getContext("2d");r=window.innerWidth,o=window.innerHeight;var L=[.5*r,.5*o],R=[],A=[],z={point:[0,0],size:[600,600]},B=[],_=function(){for(var t=0;t<100;t++){var e=2*Math.PI*Math.random(),n=20+20*Math.random(),i=[.5*n+(r-n)*Math.random(),.5*n+(o-n)*Math.random()],a=[Math.cos(e),Math.sin(e)];B[t]={points:[p.addVector(i,s.scale(a,.5*-n)),p.addVector(i,s.scale(a,.5*n))],color:"#993333",type:"stroke"}}};_();var D=function(t){v.set(L,t.pageX,t.pageY),L[0]=y(L[0],h.getLeft(z),h.getRight(z)),L[1]=y(L[1],h.getTop(z),h.getBottom(z))},W=function(t){r=E.width=window.innerWidth,o=E.height=window.innerHeight,v.set(z.size,r,o),L[0]=y(L[0],h.getLeft(z),h.getRight(z)),L[1]=y(L[1],h.getTop(z),h.getBottom(z)),_()};window.addEventListener("mousemove",D),window.addEventListener("resize",M(W)),W(),j()}]);